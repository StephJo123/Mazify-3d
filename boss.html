<html>

<head>

  <meta name="description" content="Mazify 3D" />
  <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="dist/aframe-super-shooter-kit.min.js"></script>
  <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"></script>
  <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
  <script src="js/core.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
  <script src="js/aframe-component.js"></script>
  <script src="js/boss.js"></script>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" type="image/png" href="assets/images/maze.png" />
</head>

<body>
  <a-scene inspector-plugin-recast renderer="colorManagement: true;" background="color: #444" loading-screen>
    <a-assets>
      <img id="ground" src="assets/images/sol.jpg" />
      <img id="wall" src="assets/images/wall.jpg" />
      <audio id="musique" src="assets/sounds/ambiance_sound.mp3"></audio>
      <audio id="roar" src="assets/sounds/monsterRoar.mp3"></audio>
      <a-asset-item id="boss" src="assets/models/boss/scene.gltf"></a-asset-item>
      <a-asset-item id="my-nav-mesh" src="assets/navmeshBoss.gltf"></a-asset-item>
      <a-asset-item id="missile" src="assets/models/missile/scene.gltf"></a-asset-item>
      <a-asset-item id="barriere" src="assets/models/barriere/scene.gltf"></a-asset-item>
      <a-asset-item id="gun" src="assets/models/sci-fi_revolver/scene.gltf"></a-asset-item>
      <a-asset-item id="limit" src="assets/models/limit/scene.gltf"></a-asset-item>
    </a-assets>
    <a-sky></a-sky>

    <a-entity environment="preset: volcano; groundColor: #000; grid: cross"></a-entity>

    <!-- Caméra Rig -->
    <a-entity id="player2" movement-controls="constrainToNavMesh: true">
      <!-- Caméra -->
      <a-entity camera position="0 1.6 0" look-controls id="camera" click-to-shoot-boss shooter >
        <a-cursor></a-cursor>
      </a-entity>
    </a-entity>

    <a-entity gltf-model="#barriere" position="0 0 0.45" scale="0.6 2.75 1" target="healthPoints: 10" hit-handler camera-hit></a-entity>

    <a-entity gltf-model="#my-nav-mesh" nav-mesh visible="false"></a-entity>

    <a-entity gltf-model="#boss" id="boss2" scale="0.006 0.006 0.006" position="0 1.6 -22" rotation="33 0 0"
      animation="property: position; to: -1 1.6 -16; loop: true; dur: 4000; dir: alternate" target="healthPoints: 10000"
      hit-handler-boss>
      <a-entity id="bosslife" geometry="primitive: box; width: 20; height: 0.3; depth: 0.3" material="color: green"
        position="-7.35 1330 -318.5" rotation="45 0 0" scale="100 100 100"></a-entity>
    </a-entity>
    <a-sphere id="sphere1" position="-1.18 7.405 -17.99"
      animation="property: position; to: -2.18 7.405 -11.88; loop: true; dur: 4000; dir: alternate" rotation="205 0 0"
      scale="0.25 0.25 0.25" shooter shoot-ennemy-boss visible="false"></a-sphere>
    <a-sphere id="sphere2" position="-0.51 7.627 -17.75"
      animation="property: position; to: -1.24 7.627 -11.72; loop: true; dur: 4000; dir: alternate" rotation="205 0 0"
      scale="0.25 0.25 0.25" shooter shoot-ennemy-boss visible="false"></a-sphere>
    <a-sphere id="sphere3" position="0.362 7.676 -17.77"
      animation="property: position; to: -0.62 7.676 -11.71; loop: true; dur: 4000; dir: alternate" rotation="205 0 0"
      scale="0.25 0.25 0.25" shooter shoot-ennemy-boss visible="false"></a-sphere>
    <a-sphere id="sphere4" position="1.266 7.334 -17.92"
      animation="property: position; to: 0.183 7.334 -11.98; loop: true; dur: 4000; dir: alternate" rotation="205 0 0"
      scale="0.25 0.25 0.25" shooter shoot-ennemy-boss visible="false"></a-sphere>

    <a-entity id="bullet2" bullet="name: normal; speed: 20.0; poolSize:100"
      geometry="primitive: icosahedron; radius: 0.17"
      material="color: red; emissiveIntensity: 0.5; emissive: #FF7"></a-entity>

    
    </a-entity>
    <a-entity gltf-model="#limit" id="limitGltf" scale="2 1 2" position="0 0 0" rotation="0 0 0" opacity="0.0">
    </a-entity>

  </a-scene>
  <!-- Model Gagner -->
  <div id="finishDialog" class="modal mazify" style="display: none;">
    <!-- Modal content -->
    <div class="modal-content">
      <div class="modal-header">
        <span class="close" onclick="cont()">&times;</span>
        <h2>Perdu</h2>
      </div>
      <div class="modal-body">
        <p>Le boss a vaincu</p>

</body>

</html>
